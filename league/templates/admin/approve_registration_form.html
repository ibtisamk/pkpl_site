{% extends "admin/base_site.html" %}
{% load static %}

{% block content %}
<h1>{{ title }}</h1>

<form method="post" enctype="multipart/form-data">
  {% csrf_token %}
  
  <input type="hidden" name="action" value="{{ action_name }}">
  <input type="hidden" name="confirm_approval" value="1">
  
  {% for registration in registrations %}
    <input type="hidden" name="_selected_action" value="{{ registration.pk }}">
  {% endfor %}

  <div style="margin: 20px 0;">
    <p style="margin-bottom: 15px;">
      Upload logos for the following team registrations. Logo is optional but recommended.
    </p>
    
    {% for registration in registrations %}
      <div style="background: #f8f8f8; padding: 15px; margin-bottom: 15px; border-radius: 5px; border-left: 4px solid #417690;">
        <h3 style="margin-top: 0;">{{ registration.team_name }}</h3>
        <p style="margin: 5px 0; color: #666;">
          <strong>Captain:</strong> {{ registration.captain_name }}<br>
          <strong>Platform:</strong> {{ registration.get_platform_display }}<br>
          <strong>Players:</strong> {{ registration.players.count }} + captain
        </p>
        <div style="margin-top: 10px;">
          <label for="id_logo_{{ registration.id }}" style="display: block; margin-bottom: 5px;">
            <strong>Team Logo (optional):</strong>
          </label>
          <input 
            type="file" 
            name="logo_{{ registration.id }}" 
            id="id_logo_{{ registration.id }}"
            accept="image/*"
            style="padding: 5px;"
          >
          <small style="display: block; margin-top: 5px; color: #666;">
            Recommended: Square image, JPG/PNG format
          </small>
        </div>
      </div>
    {% empty %}
      <p>All selected registrations are already approved.</p>
    {% endfor %}
  </div>

  {% if registrations %}
    <div style="margin-top: 20px;">
      <button 
        type="submit" 
        class="button default"
        style="background: #417690; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px;"
      >
        Approve and Create Clubs
      </button>
      <a href="{% url 'admin:league_teamregistration_changelist' %}" style="margin-left: 10px;">
        Cancel
      </a>
    </div>
  {% else %}
    <a href="{% url 'admin:league_teamregistration_changelist' %}" class="button">
      Back to Team Registrations
    </a>
  {% endif %}
</form>

{% endblock %}
