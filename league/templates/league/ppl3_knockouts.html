{% extends "league/base.html" %}
{% load static %}
{% block content %}

<!-- PREMIUM PPL3 BACKGROUND -->
<div class="min-h-screen bg-gradient-to-b from-[#0b2f2f] via-[#0f3d4c] to-[#0b2f2f] text-white px-4 py-10">

  <div class="max-w-6xl mx-auto space-y-14">

    <!-- HEADER -->
    <div class="text-center space-y-2">
      <h1 class="text-4xl font-extrabold tracking-wide text-yellow-300 drop-shadow-lg">
        PPL 3.0 â€” Knockout Bracket
      </h1>
      <p class="text-blue-200/80 text-sm">
        Quarterfinals, Semifinals, and Final
      </p>
    </div>

    <!-- BRACKET -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-10">

      <!-- QUARTERFINALS -->
      <div class="space-y-4">
        <h2 class="text-xl font-bold text-blue-200">Quarterfinals</h2>

        {% for r in rounds %}
          {% if r.round_type == "Quarterfinal" %}
            {% for f in r.fixtures.all %}
            <a href="{% url 'ppl3_match_detail' f.match.id %}"
               class="block bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-xl hover:bg-white/10 transition">

              <p class="font-semibold">
                {{ f.home_club.name }} vs {{ f.away_club.name }}
              </p>

              <p class="text-blue-200 text-sm mt-1">
                {{ f.date|date:"M d, Y" }}
              </p>

              {% if f.match.is_played %}
              <p class="text-yellow-300 font-bold mt-1">
                {{ f.match.home_goals }} - {{ f.match.away_goals }}
              </p>
              {% endif %}
            </a>
            {% endfor %}
          {% endif %}
        {% endfor %}
      </div>

      <!-- SEMIFINALS -->
      <div class="space-y-4">
        <h2 class="text-xl font-bold text-blue-200">Semifinals</h2>

        {% for r in rounds %}
          {% if r.round_type == "Semifinal" %}
            {% for f in r.fixtures.all %}
            <a href="{% url 'ppl3_match_detail' f.match.id %}"
               class="block bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-xl hover:bg-white/10 transition">

              <p class="font-semibold">
                {{ f.home_club.name }} vs {{ f.away_club.name }}
              </p>

              <p class="text-blue-200 text-sm mt-1">
                {{ f.date|date:"M d, Y" }}
              </p>

              {% if f.match.is_played %}
              <p class="text-yellow-300 font-bold mt-1">
                {{ f.match.home_goals }} - {{ f.match.away_goals }}
              </p>
              {% endif %}
            </a>
            {% endfor %}
          {% endif %}
        {% endfor %}
      </div>

      <!-- FINAL -->
      <div class="space-y-4">
        <h2 class="text-xl font-bold text-yellow-300">Final</h2>

        {% for r in rounds %}
          {% if r.round_type == "Final" %}
            {% for f in r.fixtures.all %}
            <a href="{% url 'ppl3_match_detail' f.match.id %}"
               class="block bg-white/5 border border-white/10 rounded-xl p-4 backdrop-blur-xl hover:bg-white/10 transition">

              <p class="font-semibold text-yellow-300">
                {{ f.home_club.name }} vs {{ f.away_club.name }}
              </p>

              <p class="text-blue-200 text-sm mt-1">
                {{ f.date|date:"M d, Y" }}
              </p>

              {% if f.match.is_played %}
              <p class="text-yellow-300 font-bold mt-1 text-lg">
                {{ f.match.home_goals }} - {{ f.match.away_goals }}
              </p>

              <!-- WINNER -->
              {% if f.match.home_goals > f.match.away_goals %}
              <p class="text-green-300 font-bold mt-1">
                Winner: {{ f.home_club.name }}
              </p>
              {% elif f.match.away_goals > f.match.home_goals %}
              <p class="text-green-300 font-bold mt-1">
                Winner: {{ f.away_club.name }}
              </p>
              {% endif %}
              {% endif %}
            </a>
            {% endfor %}
          {% endif %}
        {% endfor %}
      </div>

    </div>

  </div>
</div>

{% endblock %}
